---
import { siteConfig } from '@/site-config'

const today = new Date()
---

<footer class='py-8 md:py-6 px-4 sm:px-8 md:px-16 w-full border-t-2'>
	<div
		class='flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-4 md:gap-0'
	>
		<div class='text-sm md:text-base'>
			<span>Â© {today.getFullYear()}</span>
			<a class='underline ml-1' href='/about'>{siteConfig.author}</a>
		</div>
		<div class='flex gap-6 justify-center md:justify-end text-sm md:text-base'>
			<a class='underline' href='/privacy'>Privacy Policy</a>
			<a class='underline' href='/support'>Support</a>
			<!-- Open Banner again -->
			<div
				class='underline cookie cursor-pointer'
				aria-label='Show Cookie Consent Settings'
				id='show-cookie-banner'
				role='button'
			>
				Show Cookie Consent Settings
			</div>
		</div>
		<div class='text-sm md:text-base mt-4 md:mt-0'>All rights reserved.</div>
	</div>
</footer>

<script>
	const initFooter = () => {
		// Add transition classes to body to prevent FOUC on mobile devices
		document.body.classList.add('transition-colors', 'duration-300', 'ease-in-out')

		// Show cookie banner listener
		const showCookieBanner = document.getElementById('show-cookie-banner')
		const cookieBanner = document.getElementById('cookie-banner')

		if (showCookieBanner && cookieBanner && !showCookieBanner.dataset.bound) {
			showCookieBanner.addEventListener('click', () => {
				cookieBanner.classList.remove('hidden')
			})
			showCookieBanner.dataset.bound = 'true'
		}
	}

	if (document.readyState !== 'loading') {
		initFooter()
	} else {
		document.addEventListener('DOMContentLoaded', initFooter, { once: true })
	}

	document.addEventListener('astro:page-load', initFooter)
	document.addEventListener('astro:after-swap', initFooter)
</script>
