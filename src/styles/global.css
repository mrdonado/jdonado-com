@import "tailwindcss";
@plugin "@tailwindcss/typography";

@view-transition {
	navigation: auto;
	view-transition-name: root;
}

/* Ensure all view transition pseudo-elements don't block clicks */
::view-transition,
::view-transition-group(*),
::view-transition-image-pair(*),
::view-transition-old(*),
::view-transition-new(*) {
	pointer-events: none !important;
}

::view-transition-old(root),
::view-transition-new(root) {
	animation-duration: 0.6s;
}

/* Smooth synchronized theme transitions */
.theme-transition,
.theme-transition * {
	transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease !important;
}

@custom-variant dark (&:where(.dark, .dark *));

@theme {
	--color-white: #f8f9fa;
	--font-body: Manrope, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
	--grid-template-columns-list: repeat(auto-fill, minmax(400px, max-content));
}

/* Typography overrides */
.prose blockquote {
	quotes: none;
}

@layer base {

	html {
		font-family: 'Raleway', sans-serif;
	}

	html.fouc-fix {
		display: none;
	}

	.prose code {
		@apply text-base;
	}

	/* prose styles here */
	.prose h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@apply !text-zinc-800;
	}

	html.dark .prose h1,
	html.dark h2,
	html.dark h3,
	html.dark h4,
	html.dark h5,
	html.dark h6 {
		@apply !text-zinc-100;
	}

	html.dark .shiki,
	html.dark .shiki span {
		color: var(--shiki-dark) !important;
		background-color: var(--color-gray-900) !important;
	}
}


.glass {
	/* Base: static tint everywhere */
	--glass-blur-start: 0px;
	--glass-blur-end: 13px;
	--glass-sat-start: 1;
	--glass-sat-end: 1.5;
	background: rgba(27, 26, 26, 0.705);
	backdrop-filter: none;
	-webkit-backdrop-filter: none;
	isolation: isolate;
}

/* Apply animated blur only on browsers that support backdrop-filter and are not Safari/iOS */
@supports ((backdrop-filter: blur(1px)) and (not (-webkit-touch-callout: none))) {
	.glass {
		backdrop-filter: blur(var(--glass-blur-start)) saturate(var(--glass-sat-start));
		-webkit-backdrop-filter: blur(var(--glass-blur-start)) saturate(var(--glass-sat-start));
		animation: delayed-blur 0.8s ease-out 0.2s forwards;
	}
}

/* Safari/iOS stays on static tint (no blur) */
@supports (-webkit-touch-callout: none) {
	.glass {
		animation: none;
		backdrop-filter: none;
		-webkit-backdrop-filter: none;
		background: rgba(27, 26, 26, 0.705);
	}
}

@keyframes delayed-blur {
	to {
		backdrop-filter: blur(var(--glass-blur-end)) saturate(var(--glass-sat-end));
		-webkit-backdrop-filter: blur(var(--glass-blur-end)) saturate(var(--glass-sat-end));
	}
}

/* Safari fix for overflow-hidden containers with transforming children */
.safari-overflow-fix {
	-webkit-mask-image: -webkit-radial-gradient(white, black);
	mask-image: radial-gradient(white, black);
}

.shadow {
	box-shadow: -5px 3px 8px 1px rgba(0, 0, 0, 0.12);
}

a.link {
	text-decoration: underline;
}

@keyframes fade-and-grow {
	0% {
		transform: scale(0.985) translate3d(0, 0, 0);
		opacity: 0.6;
	}

	100% {
		transform: scale(1) translate3d(0, 0, 0);
		opacity: 1;
	}
}

.appear-smoothly {
	animation: fade-and-grow 0.6s ease;
	will-change: transform, opacity;
}

@keyframes fadein {
	0% {
		opacity: 0;
	}

	100% {
		opacity: 1;
	}
}

.fadein {
	animation: fadein 0.6s ease;
}

a,
.manipulation {
	touch-action: manipulation;
}

button,
a {
	pointer-events: auto;
	cursor: pointer;
}